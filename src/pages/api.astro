---
import Layout from '../layouts/Layout.astro'
import Hero from '../components/blocks/hero/PageHeader.astro'

const SEO = {
    title: 'AnalyzeMyDream | API Reference & Documentation',
    description:
        'Explore the comprehensive API reference and documentation for AnalyzeMyDream. This resource provides detailed guidance on utilizing our API efficiently and integrating it seamlessly into your applications.'
};

const header = {
    title: '<strong>API</strong> Reference & Documentation',
    text: 'Explore the AnalyzeMyDream API Reference. Access essential details to seamlessly integrate our API into your projects with our straightforward documentation.'
};
---

<Layout title={SEO.title} description={SEO.description}>
    <Hero title={header.title} text={header.text} />

    <div class="container">  
        <aside class="sidebar">
            <nav>
                <ul class="menu">
                    <li class="menu-item">
                        <a href="#get-dream-article">
                            <span class="endpoint-get">GET</span>
                            <span class="title">Get Dream Meanings</span>
                            <span class="path"><strong style="color: #4FC9B0;">/dream/&lbrace;api_key&rcub;/&lbrace;lang&rcub;/&lbrace;category&rcub;/&lbrace;slug&rcub;</strong></span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="#fast-ai-dream-analyzer">
                            <span class="endpoint-post">POST</span>
                            <span class="title">Fast-AI Dream Analyzer</span>
                            <span class="path"><strong style="color: #579CD6;">/analyzer/&lbrace;api_key&rcub;</strong></span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="#ai-advanced-dream-analyzer">
                            <span class="endpoint-post">POST</span>
                            <span class="title">Advanced-AI Dream Analyzer</span>
                            <span class="path"><strong style="color: #579CD6;">/advanced-analyzer/&lbrace;api_key&rcub;</strong></span>
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>
    </div>
    <br>
    <!-- API Key Request Form -->
    <article id="api-key-form" class="api-endpoint">
        <h2 class="endpoint-title" style="border-bottom: 2px solid #7BC7C7; color: #94A3B8;">Request API Key</h2>
        <p>To obtain your API key, please enter your email address below. We will send you an API key to the provided email.</p>
        
        <form id="apiForm" class="space-y-4">
            <div class="flex justify-center items-center h-full">
                <input
                    id="emailAddress"
                    name="emailAddress"
                    type="email"
                    required
                    class="w-full p-2 border border-gray-300 rounded"
                    style="max-width:50%;"
                    placeholder="Enter your email address..."
                />
            </div>
            
            <div class="flex justify-center space-x-4 mt-4">
                <button
                    id="obtainApiKeyButton"
                    type="submit"
                    class="relative flex items-center justify-center text-white py-2 px-4 rounded-lg hover:bg-blue-600"
                    style="background-color: rgba(123, 199, 199, var(--tw-bg-opacity));"
                >
                    <span id="buttonText" style="font-weight: 700; font-size: 0.875rem;">Obtain API Key</span>
                </button>
            </div>
            <p id="responseMessage" class="mt-4" style="text-align: center; font-weight:800;"></p>
        </form>
    </article>
    <br>
    <main class="documentation-content">
        <article id="get-dream-article" class="api-endpoint">
            <h2 class="endpoint-title" style="border-bottom: 2px solid #4EC2AB; color: #94A3B8;">Get Dream Meanings</h2>
            <p><strong>Method:</strong> <span class="highlight-method">GET</span></p>
            <p><strong>Endpoint:</strong> <span class="highlight-description" style="color: #4FC9B0;"> /dream/&lbrace;api_key&rcub;/&lbrace;lang&rcub;/&lbrace;category&rcub;/&lbrace;slug&rcub;</span></p>
            <p><strong>Description:</strong> <span class="highlight-description">Retrieves a dream article based on the language, category, and article identifier.</span></p>

            <h3>Path Parameters</h3>
            <ul class="parameters-list">
                <li><strong class="parameters-li-green">api_key (required):</strong> API Key Auth (e.g., <em><strong>AMD_</strong>...</em>)</li>
                <li><strong class="parameters-li-green">lang (required):</strong> Language of the article (e.g., <em><strong>English</strong>, <strong>Portuguese</strong>, <strong>Spanish</strong></em>)</li>
                <li><strong class="parameters-li-green">category (required):</strong> Category of the dream (e.g., <em><strong>Animals</strong>, <strong>People</strong></em>)</li>
                <li><strong class="parameters-li-green">slug (required):</strong> Unique identifier of the article (e.g., <em><strong>what-does-it-mean-to-dream-about-work</strong></em>)</li>
            </ul>
            

            <h3>Responses</h3>
            <p><strong>200 OK:</strong></p>
            <div class="response-example" style="border-left: 4px solid #48B09E;">
                <p><strong>Response Body:</strong></p>


                <div class="json-example">
                    <p class="example-json"><strong>Example JSON:</strong></p>
                    <pre class="json-content">
    &#123;
        "title": "Article Title",
        "pubDate": "2024-08-16",
        "description": "Description of the dream article.",
        "author": "Author Name",
        "image": "https://analyzemydream.com/article-image.png",
        "tags": ["dream", "meanings"],
        "content": "Full content of the dream article."
    &#125;
                    </pre>
                </div>
            </div>
    
            <p><strong>422 Validation Error:</strong></p>
            <div class="response-example" style="border-left: 4px solid #48B09E;">
                <p><strong>Response Body:</strong></p>
                <div class="json-example">
                    <p class="example-json"><strong>Example JSON:</strong></p>
                    <pre class="json-content">
    &#123;
        "detail": [
            &#123;
                "loc": ["path", "lang"],
                "msg": "field required",
                "type": "value_error.missing"
            &#125;
        ]
    &#125;
                    </pre>
                </div>
            </div>
        </article>
        <br>
        <article id="fast-ai-dream-analyzer" class="api-endpoint">
            <h2 class="endpoint-title" style="border-bottom: 2px solid #579CD6; color: #94A3B8;">Fast-AI Dream Analyzer</h2>
            <p><strong>Method:</strong> <span style="font-weight: bold; color: #579CD6;">POST</span></p>
            <p><strong>Endpoint:</strong> <span style="color: #579CD6;">/analyzer/&lbrace;api_key&rcub;</span></p>
            <p><strong>Description:</strong> <span>Analyze a dream by providing a description, and the Fast-AI Analyzer returns a quick interpretation based on predefined criteria.</span></p>

            <h3>Request Body</h3>
            <ul class="parameters-list">
                <li><strong class="parameters-li-blue">api_key (required):</strong> API Key Auth (e.g., <em><strong>AMD_</strong>...</em>)</li>
                <li><strong class="parameters-li-blue">dream_description (required):</strong> A detailed description of the dream (minimum 30 words)</li>
                <li><strong class="parameters-li-blue">lang (required):</strong> Language code (e.g., <em><strong>en</strong>, <strong>pt</strong>, <strong>es</strong></em>)</li>
            </ul>

    
            <h3>Responses</h3>
            <p><strong>200 OK:</strong></p>
            <div class="response-example" style="border-left: 4px solid #579CD6;">
                <p><strong>Response Body:</strong></p>
                <div class="json-example-post">
                    <p class="example-json"><strong>Example JSON:</strong></p>
                    <pre class="json-content">
    &#123;
        "analysis": "In-depth analysis and interpretation of the dream."
    &#125;
                    </pre>
                </div>
            </div>
    
            <p><strong>422 Validation Error:</strong></p>
            <div class="response-example" style="border-left: 4px solid #579CD6;">
                <p><strong>Response Body:</strong></p>
                <div class="json-example-post">
                    <p class="example-json"><strong>Example JSON:</strong></p>
                    <pre class="json-content">
    &#123;
        "detail": [
            &#123;
                "loc": ["body", "dream_description"],
                "msg": "Ensure the description has at least 30 words.",
                "type": "value_error"
            &#125;,
            &#123;
                "loc": ["body", "lang"],
                "msg": "Input should be 'en', 'pt' or 'es'",
                "input": "fr",
                "ctx": &#123; "expected": "'en', 'pt' or 'es'" &#125;
            &#125;
        ]
    &#125;
                    </pre>
                </div>
            </div>
        </article>
        <br>
        <article id="ai-advanced-dream-analyzer" class="api-endpoint">
            <h2 class="endpoint-title" style="border-bottom: 2px solid #579CD6; color: #94A3B8;">AI-Advanced Dream Analyzer</h2>
            <p><strong>Method:</strong> <span style="font-weight: bold;">POST</span></p>
            <p><strong>Endpoint:</strong> <span style="color: #579CD6;">/advanced-analyzer/&lbrace;api_key&rcub;</span></p>
            <p><strong>Description:</strong> <span>Analyze a dream with Advanced-AI, delivering a comprehensive interpretation that considers multiple factors such as type, importance, emotions, context, and more for a refined and specific result.</span></p>

            <h3>Request Body</h3>
            <ul class="parameters-list">
                <li><strong class="parameters-li-blue">api_key (required):</strong> API Key Auth (e.g., <em><strong>AMD_</strong>...</em>)</li>
                <li><strong class="parameters-li-blue">dream_description (required):</strong> A detailed description of the dream (minimum 30 words)</li>
                <li><strong class="parameters-li-blue">dream_type (optional):</strong> Type of the dream (e.g., <em><strong>Experienced</strong>, <strong>Lucid</strong>, <strong>Blurred</strong>, <strong>N/A</strong></em>)</li>
                <li><strong class="parameters-li-blue">dream_importance (optional):</strong> Importance of the dream (e.g., <em><strong>Insignificant</strong>, <strong>Neutral</strong>, <strong>Very Important</strong>, <strong>N/A</strong></em>)</li>
                <li><strong class="parameters-li-blue">main_emotions (optional):</strong> Main emotions experienced in the dream (e.g., <em><strong>Happiness</strong>, <strong>Sadness</strong>, <strong>Fear</strong>, <strong>Anxiety</strong>, <strong>Anger</strong>, <strong>N/A</strong></em>)</li>
                <li><strong class="parameters-li-blue">dream_context (optional):</strong> Context of the dream (e.g., <em><strong>Familiar</strong>, <strong>Unknown</strong>, <strong>Natural Environment</strong>, <strong>Urban Environment</strong>, <strong>N/A</strong></em>)</li>
                <li><strong class="parameters-li-blue">dream_state (optional):</strong> State after the dream (e.g., <em><strong>Refreshed</strong>, <strong>Tired</strong>, <strong>Confused</strong>, <strong>Indifferent</strong>, <strong>N/A</strong></em>)</li>
                <li><strong class="parameters-li-blue">dream_frequency (optional):</strong> Frequency of similar dreams (e.g., <em><strong>Rarely</strong>, <strong>Occasionally</strong>, <strong>Frequently</strong>, <strong>Always</strong>, <strong>N/A</strong></em>)</li>
                <li><strong class="parameters-li-blue">dream_expectations (optional):</strong> Expectations from the dream (e.g., <em><strong>Problem Resolution</strong>, <strong>Personal Insight</strong>, <strong>Warnings</strong>, <strong>Entertainment</strong>, <strong>N/A</strong></em>)</li>
            </ul>

    
            <h3>Responses</h3>
            <p><strong>200 OK:</strong></p>
            <div class="response-example" style="border-left: 4px solid #579CD6;">
                <p><strong>Response Body:</strong></p>
                <div class="json-example-post">
                    <p class="example-json"><strong>Example JSON:</strong></p>
                    <pre class="json-content">
    &#123;
        "analysis": "Advanced analysis based on multiple criteria."
    &#125;
                    </pre>
                </div>
            </div>
    
            <p><strong>422 Validation Error:</strong></p>
            <div class="response-example" style="border-left: 4px solid #579CD6;">
                <p><strong>Response Body:</strong></p>
                <div class="json-example-post">
                    <p class="example-json"><strong>Example JSON:</strong></p>
                    <pre class="json-content">
    &#123;
        "detail": [
            &#123;
                "loc": ["body", "dream_description"],
                "msg": "Ensure the description has at least 30 words.",
                "type": "value_error"
            &#125;,
            &#123;
                "loc": ["body", "dream_type"],
                "msg": "Invalid value. Expected one of: Experienced, Lucid, Blurred, N/A",
                "input": "Fantasy",
                "ctx": &#123; "expected": "Experienced, Lucid, Blurred, N/A" &#125;
            &#125;
        ]
    &#125;
                    </pre>
                </div>
            </div>
        </article>
    </main>
    <br>
    <br>
    </div>
</Layout>
<script type="module">
    document.getElementById('apiForm').addEventListener('submit', async (event) => {
        event.preventDefault();

        const obtainApiKeyButton = document.getElementById('obtainApiKeyButton');
        const buttonText = document.getElementById('buttonText');
        const emailAddress = document.getElementById('emailAddress');
        const responseMessage = document.getElementById('responseMessage');

        if (!obtainApiKeyButton || !buttonText || !emailAddress || !responseMessage) {
            console.error('One or more elements are missing.');
            return;
        }

        buttonText.textContent = 'Requesting...';
        obtainApiKeyButton.disabled = true;

        try {
            const response = await fetch('https://analyzemydream-api-key.vercel.app/', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ email: emailAddress.value }),
            });

            const result = await response.json();
            if (response.ok) {
                responseMessage.textContent = 'API key sent to your email!';
            } else {
                responseMessage.textContent = result.error || 'An error occurred. Please try again.';
            }
        } catch (error) {
            responseMessage.textContent = 'An error occurred. Please try again.';
        } finally {
            obtainApiKeyButton.disabled = false;
            buttonText.textContent = 'Obtain API Key';
        }
    });
</script>

<style>
    h3 {
        font-size: 18.5px;
    }

    p {
        font-size: 15px;
    }

    .container {
        margin: 0 auto;
        max-width: min(90%, 800px);
    }

    .sidebar {
        background-color: #2e2e2e;
        color: #f5f5f5;
        padding: 1rem;
        border-radius: 10px;
        position: relative;
        margin-top: 20px;
        margin-bottom: 20px;
    }

    .menu {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .menu-item {
        display: grid;
        grid-template-columns: 1fr 2fr 3fr; 
        gap: 1rem; 
        border-bottom: 1px solid #4a4a4a;
        margin-bottom: 0.5rem;
        padding-bottom: 0.5rem;
        align-items: center; 
    }

    .menu-item a {
        display: contents;
        color: #e0e0e0;
        text-decoration: none;
    }

    .menu-item a:hover {
        color: #ffffff;
    }

    .endpoint-get {
        background-color: #4FC9B0;
        color: white;
        font-weight: 900;
        border-radius: 4px;
        padding: 0.2rem 0.5rem;
        font-size: 0.8rem;
        text-align: center;
    }

    .endpoint-post {
        background-color: #579CD6;
        color: white;
        font-weight: 900;
        border-radius: 4px;
        padding: 0.2rem 0.5rem;
        font-size: 0.8rem;
        text-align: center;
    }

    .title {
        font-weight: bold;
        font-size: 1rem;
    }

    .path {
        font-size: 0.9rem;
        color: #e0e0e0;
        font-family: monospace; 
    }

    .documentation-content {
        margin: 0 auto;
    }

    .parameters-li-green {
        color: #51C9B0;
    }

    .parameters-li-blue {
        color: #579CD6;
    }

    .api-endpoint {
        margin-bottom: 3rem;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        padding: 2rem;
        max-width: 1000px; 
        margin: 0 auto;
    }

    .endpoint-title {
        font-size: 1.5rem;
        padding-bottom: 0.5rem;
        margin-bottom: 1rem;
        color: #94A3B8;
    }

    .parameters-list {
        list-style: none;
        padding: 0;
        margin: 0;
        margin-bottom: 1rem;
    }

    .parameters-list li {
        margin-bottom: 0.5rem;
    }

    .highlight-method {
        font-weight: bold;
        color: #51C9B0; 
    }

    .highlight-endpoint {
        font-weight: bold;
        font-family: 'Courier New', Courier, monospace;
        color: #d9534f;
    }

    .highlight-description {
        color: #94A3B8;
    }

    .parameters-list li {
        margin-bottom: 0.5em;
        font-family: Arial, sans-serif;
        font-size: 14px;
        line-height: 1.5;
    }

    .response-example {
        background-color: transparent;
        padding: 10px;
        margin-top: 10px;
        font-family: 'Courier New', Courier, monospace;
    }


    .response-example {
        margin-bottom: 1rem;
    }

    .json-content {
        text-wrap: wrap;
    }

    .example-json {
        margin-top: 10px;
        margin-left: 15px;
    }

    .json-example {
        border: 2px solid #333;
        color: #4FC9B0;
        font-size: 13px;
        background-color: #222222de;
        border-radius: 12px;
    }

    .json-example-post {
        border: 2px solid #333;
        color: #579CD6;
        font-size: 13px;
        background-color: #222222de;
        border-radius: 12px;
    }

    @media only screen and (max-width: 600px) {
        .sidebar {
            max-width: 95%;
            margin: 0 auto;
        }
    }

    @media only screen and (max-width: 600px) {
        .menu-item .endpoint-get,
        .menu-item .endpoint-post,
        .menu-item .title,
        .menu-item .path {
            font-size: 0.8rem;
        }
    }
    @media only screen and (max-width: 500px) {
        .menu-item .path {
            word-wrap: break-word;
            overflow-wrap: break-word;
            white-space: normal;
            font-size: 0.7rem;
        }
    }

    @media only screen and (max-width: 600px) {
    .menu-item .path {
        font-size: 0.6rem;
        word-wrap: break-word;
        overflow-wrap: break-word;
        white-space: wrap;
        overflow: hidden; 
        text-overflow: ellipsis; 
        max-width: 100%;
    }

    .container {
        margin-top: 3rem;
    }
}
</style>